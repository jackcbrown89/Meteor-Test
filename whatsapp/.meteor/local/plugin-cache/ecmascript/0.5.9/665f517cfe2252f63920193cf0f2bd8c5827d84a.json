{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck"],"marked":[],"modules":{"imports":[{"source":"meteor/underscore","imported":["_"],"specifiers":[{"kind":"named","imported":"_","local":"_"}]},{"source":"meteor/accounts-base","imported":["Accounts"],"specifiers":[{"kind":"named","imported":"Accounts","local":"Accounts"}]},{"source":"angular-ecmascript/module-helpers","imported":["Controller"],"specifiers":[{"kind":"named","imported":"Controller","local":"Controller"}]}],"exports":{"exported":["ConfirmationCtrl"],"specifiers":[{"kind":"local","local":"ConfirmationCtrl","exported":"default"}]}}},"options":{"filename":"/client/scripts/controllers/confirmation.controller.js","filenameRelative":"/client/scripts/controllers/confirmation.controller.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/scripts/controllers/confirmation.controller.js.map","sourceFileName":"/client/scripts/controllers/confirmation.controller.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"confirmation.controller"},"ignored":false,"code":"var _classCallCheck;module.import('babel-runtime/helpers/classCallCheck',{\"default\":function(v){_classCallCheck=v}});var _possibleConstructorReturn;module.import('babel-runtime/helpers/possibleConstructorReturn',{\"default\":function(v){_possibleConstructorReturn=v}});var _inherits;module.import('babel-runtime/helpers/inherits',{\"default\":function(v){_inherits=v}});var _;module.import('meteor/underscore',{\"_\":function(v){_=v}});var Accounts;module.import('meteor/accounts-base',{\"Accounts\":function(v){Accounts=v}});var Controller;module.import('angular-ecmascript/module-helpers',{\"Controller\":function(v){Controller=v}});\n\n\n\n\n\n\nvar ConfirmationCtrl = function (_Controller) {\n  _inherits(ConfirmationCtrl, _Controller);\n\n  function ConfirmationCtrl() {\n    _classCallCheck(this, ConfirmationCtrl);\n\n    var _this = _possibleConstructorReturn(this, _Controller.apply(this, arguments));\n\n    _this.phone = _this.$state.params.phone;\n    return _this;\n  }\n\n  ConfirmationCtrl.prototype.confirm = function () {\n    function confirm() {\n      var _this2 = this;\n\n      if (_.isEmpty(this.code)) return;\n\n      Accounts.verifyPhone(this.phone, this.code, function (err) {\n        if (err) return _this2.handleError(err);\n        _this2.$state.go('profile');\n      });\n    }\n\n    return confirm;\n  }();\n\n  ConfirmationCtrl.prototype.handleError = function () {\n    function handleError(err) {\n      this.$log.error('Confirmation error ', err);\n\n      this.$ionicPopup.alert({\n        title: err.reason || 'Confirmation failed',\n        template: 'Please try again',\n        okType: 'button-positive button-clear'\n      });\n    }\n\n    return handleError;\n  }();\n\n  return ConfirmationCtrl;\n}(Controller);\n\nmodule.export(\"default\",exports.default=(ConfirmationCtrl));\n\n\nConfirmationCtrl.$name = 'ConfirmationCtrl';\nConfirmationCtrl.$inject = ['$state', '$ionicPopup', '$log'];","ast":null,"map":{"version":3,"sources":["/client/scripts/controllers/confirmation.controller.js"],"names":["_","Accounts","Controller","ConfirmationCtrl","arguments","phone","$state","params","confirm","isEmpty","code","verifyPhone","err","handleError","go","$log","error","$ionicPopup","alert","title","reason","template","okType","$name","$inject"],"mappings":";;;AAAA,SAASA,CAAT,QAAkB,mBAAlB;AACA,SAASC,QAAT,QAAyB,sBAAzB;AACA,SAASC,UAAT,QAA2B,mCAA3B;;IAEqBC,gB;;;AACnB,8BAAc;AAAA;;AAAA,iDACZ,wBAASC,SAAT,CADY;;AAGZ,UAAKC,KAAL,GAAa,MAAKC,MAAL,CAAYC,MAAZ,CAAmBF,KAAhC;AAHY;AAIb;;6BAEDG,O;uBAAU;AAAA;;AACR,UAAIR,EAAES,OAAF,CAAU,KAAKC,IAAf,CAAJ,EAA0B;;AAE1BT,eAASU,WAAT,CAAqB,KAAKN,KAA1B,EAAiC,KAAKK,IAAtC,EAA4C,UAACE,GAAD,EAAS;AACnD,YAAIA,GAAJ,EAAS,OAAO,OAAKC,WAAL,CAAiBD,GAAjB,CAAP;AACT,eAAKN,MAAL,CAAYQ,EAAZ,CAAe,SAAf;AACD,OAHD;AAID;;;;;6BAEDD,W;yBAAYD,G,EAAK;AACf,WAAKG,IAAL,CAAUC,KAAV,CAAgB,qBAAhB,EAAuCJ,GAAvC;;AAEA,WAAKK,WAAL,CAAiBC,KAAjB,CAAuB;AACrBC,eAAOP,IAAIQ,MAAJ,IAAc,qBADA;AAErBC,kBAAU,kBAFW;AAGrBC,gBAAQ;AAHa,OAAvB;AAKD;;;;;;EAxB2CpB,U;;eAAzBC,gB;;;AA2BrBA,iBAAiBoB,KAAjB,GAAyB,kBAAzB;AACApB,iBAAiBqB,OAAjB,GAA2B,CAAC,QAAD,EAAW,aAAX,EAA0B,MAA1B,CAA3B","file":"/client/scripts/controllers/confirmation.controller.js.map","sourcesContent":["import { _ } from 'meteor/underscore';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Controller } from 'angular-ecmascript/module-helpers';\n\nexport default class ConfirmationCtrl extends Controller {\n  constructor() {\n    super(...arguments);\n\n    this.phone = this.$state.params.phone;\n  }\n\n  confirm() {\n    if (_.isEmpty(this.code)) return;\n\n    Accounts.verifyPhone(this.phone, this.code, (err) => {\n      if (err) return this.handleError(err);\n      this.$state.go('profile');\n    });\n  }\n\n  handleError(err) {\n    this.$log.error('Confirmation error ', err);\n\n    this.$ionicPopup.alert({\n      title: err.reason || 'Confirmation failed',\n      template: 'Please try again',\n      okType: 'button-positive button-clear'\n    });\n  }\n}\n\nConfirmationCtrl.$name = 'ConfirmationCtrl';\nConfirmationCtrl.$inject = ['$state', '$ionicPopup', '$log'];"]},"hash":"665f517cfe2252f63920193cf0f2bd8c5827d84a"}
