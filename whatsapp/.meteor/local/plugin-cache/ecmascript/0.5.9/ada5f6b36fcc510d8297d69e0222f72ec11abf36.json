{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck"],"marked":[],"modules":{"imports":[{"source":"meteor/underscore","imported":["_"],"specifiers":[{"kind":"named","imported":"_","local":"_"}]},{"source":"meteor/okland:camera-ui","imported":["MeteorCameraUI"],"specifiers":[{"kind":"named","imported":"MeteorCameraUI","local":"MeteorCameraUI"}]},{"source":"angular-ecmascript/module-helpers","imported":["Controller"],"specifiers":[{"kind":"named","imported":"Controller","local":"Controller"}]}],"exports":{"exported":["ProfileCtrl"],"specifiers":[{"kind":"local","local":"ProfileCtrl","exported":"default"}]}}},"options":{"filename":"/client/scripts/controllers/profile.controller.js","filenameRelative":"/client/scripts/controllers/profile.controller.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/scripts/controllers/profile.controller.js.map","sourceFileName":"/client/scripts/controllers/profile.controller.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"profile.controller"},"ignored":false,"code":"var _classCallCheck;module.import('babel-runtime/helpers/classCallCheck',{\"default\":function(v){_classCallCheck=v}});var _possibleConstructorReturn;module.import('babel-runtime/helpers/possibleConstructorReturn',{\"default\":function(v){_possibleConstructorReturn=v}});var _inherits;module.import('babel-runtime/helpers/inherits',{\"default\":function(v){_inherits=v}});var _;module.import('meteor/underscore',{\"_\":function(v){_=v}});var MeteorCameraUI;module.import('meteor/okland:camera-ui',{\"MeteorCameraUI\":function(v){MeteorCameraUI=v}});var Controller;module.import('angular-ecmascript/module-helpers',{\"Controller\":function(v){Controller=v}});\n\n\n\n\n\n\nvar ProfileCtrl = function (_Controller) {\n  _inherits(ProfileCtrl, _Controller);\n\n  function ProfileCtrl() {\n    _classCallCheck(this, ProfileCtrl);\n\n    var _this = _possibleConstructorReturn(this, _Controller.apply(this, arguments));\n\n    var profile = _this.currentUser && _this.currentUser.profile;\n    _this.name = profile ? profile.name : '';\n    return _this;\n  }\n\n  ProfileCtrl.prototype.updatePicture = function () {\n    function updatePicture() {\n      var _this2 = this;\n\n      MeteorCameraUI.getPicture({ width: 60, height: 60 }, function (err, data) {\n        if (err) return _this2.handleError(err);\n\n        _this2.$ionicLoading.show({\n          template: 'Updating picture...'\n        });\n\n        _this2.callMethod('updatePicture', data, function (err) {\n          _this2.$ionicLoading.hide();\n          _this2.handleError(err);\n        });\n      });\n    }\n\n    return updatePicture;\n  }();\n\n  ProfileCtrl.prototype.updateName = function () {\n    function updateName() {\n      var _this3 = this;\n\n      if (_.isEmpty(this.name)) return;\n\n      this.callMethod('updateName', this.name, function (err) {\n        if (err) return _this3.handleError(err);\n        _this3.$state.go('tab.chats');\n      });\n    }\n\n    return updateName;\n  }();\n\n  ProfileCtrl.prototype.handleError = function () {\n    function handleError(err) {\n      if (err.error == 'cancel') return;\n      this.$log.error('Profile save error ', err);\n\n      this.$ionicPopup.alert({\n        title: err.reason || 'Save failed',\n        template: 'Please try again',\n        okType: 'button-positive button-clear'\n      });\n    }\n\n    return handleError;\n  }();\n\n  return ProfileCtrl;\n}(Controller);\n\nmodule.export(\"default\",exports.default=(ProfileCtrl));\n\n\nProfileCtrl.$name = 'ProfileCtrl';\nProfileCtrl.$inject = ['$state', '$ionicLoading', '$ionicPopup', '$log'];","ast":null,"map":{"version":3,"sources":["/client/scripts/controllers/profile.controller.js"],"names":["_","MeteorCameraUI","Controller","ProfileCtrl","arguments","profile","currentUser","name","updatePicture","getPicture","width","height","err","data","handleError","$ionicLoading","show","template","callMethod","hide","updateName","isEmpty","$state","go","error","$log","$ionicPopup","alert","title","reason","okType","$name","$inject"],"mappings":";;;AAAA,SAASA,CAAT,QAAkB,mBAAlB;AACA,SAASC,cAAT,QAA+B,yBAA/B;AACA,SAASC,UAAT,QAA2B,mCAA3B;;IAEqBC,W;;;AACnB,yBAAc;AAAA;;AAAA,iDACZ,wBAASC,SAAT,CADY;;AAGZ,QAAMC,UAAU,MAAKC,WAAL,IAAoB,MAAKA,WAAL,CAAiBD,OAArD;AACA,UAAKE,IAAL,GAAYF,UAAUA,QAAQE,IAAlB,GAAyB,EAArC;AAJY;AAKb;;wBAEDC,a;6BAAiB;AAAA;;AACfP,qBAAeQ,UAAf,CAA0B,EAAEC,OAAO,EAAT,EAAaC,QAAQ,EAArB,EAA1B,EAAqD,UAACC,GAAD,EAAMC,IAAN,EAAe;AAClE,YAAID,GAAJ,EAAS,OAAO,OAAKE,WAAL,CAAiBF,GAAjB,CAAP;;AAET,eAAKG,aAAL,CAAmBC,IAAnB,CAAwB;AACtBC,oBAAU;AADY,SAAxB;;AAIA,eAAKC,UAAL,CAAgB,eAAhB,EAAiCL,IAAjC,EAAuC,UAACD,GAAD,EAAS;AAC9C,iBAAKG,aAAL,CAAmBI,IAAnB;AACA,iBAAKL,WAAL,CAAiBF,GAAjB;AACD,SAHD;AAID,OAXD;AAYD;;;;;wBAEDQ,U;0BAAa;AAAA;;AACX,UAAIpB,EAAEqB,OAAF,CAAU,KAAKd,IAAf,CAAJ,EAA0B;;AAE1B,WAAKW,UAAL,CAAgB,YAAhB,EAA8B,KAAKX,IAAnC,EAAyC,UAACK,GAAD,EAAS;AAChD,YAAIA,GAAJ,EAAS,OAAO,OAAKE,WAAL,CAAiBF,GAAjB,CAAP;AACT,eAAKU,MAAL,CAAYC,EAAZ,CAAe,WAAf;AACD,OAHD;AAID;;;;;wBAEDT,W;yBAAYF,G,EAAK;AACf,UAAIA,IAAIY,KAAJ,IAAa,QAAjB,EAA2B;AAC3B,WAAKC,IAAL,CAAUD,KAAV,CAAgB,qBAAhB,EAAuCZ,GAAvC;;AAEA,WAAKc,WAAL,CAAiBC,KAAjB,CAAuB;AACrBC,eAAOhB,IAAIiB,MAAJ,IAAc,aADA;AAErBZ,kBAAU,kBAFW;AAGrBa,gBAAQ;AAHa,OAAvB;AAKD;;;;;;EAzCsC5B,U;;eAApBC,W;;;AA4CrBA,YAAY4B,KAAZ,GAAoB,aAApB;AACA5B,YAAY6B,OAAZ,GAAsB,CAAC,QAAD,EAAW,eAAX,EAA4B,aAA5B,EAA2C,MAA3C,CAAtB","file":"/client/scripts/controllers/profile.controller.js.map","sourcesContent":["import { _ } from 'meteor/underscore';\nimport { MeteorCameraUI } from 'meteor/okland:camera-ui';\nimport { Controller } from 'angular-ecmascript/module-helpers';\n\nexport default class ProfileCtrl extends Controller {\n  constructor() {\n    super(...arguments);\n\n    const profile = this.currentUser && this.currentUser.profile;\n    this.name = profile ? profile.name : '';\n  }\n\n  updatePicture () {\n    MeteorCameraUI.getPicture({ width: 60, height: 60 }, (err, data) => {\n      if (err) return this.handleError(err);\n\n      this.$ionicLoading.show({\n        template: 'Updating picture...'\n      });\n\n      this.callMethod('updatePicture', data, (err) => {\n        this.$ionicLoading.hide();\n        this.handleError(err);\n      });\n    });\n  }\n\n  updateName() {\n    if (_.isEmpty(this.name)) return;\n\n    this.callMethod('updateName', this.name, (err) => {\n      if (err) return this.handleError(err);\n      this.$state.go('tab.chats');\n    });\n  }\n\n  handleError(err) {\n    if (err.error == 'cancel') return;\n    this.$log.error('Profile save error ', err);\n\n    this.$ionicPopup.alert({\n      title: err.reason || 'Save failed',\n      template: 'Please try again',\n      okType: 'button-positive button-clear'\n    });\n  }\n}\n\nProfileCtrl.$name = 'ProfileCtrl';\nProfileCtrl.$inject = ['$state', '$ionicLoading', '$ionicPopup', '$log'];\n"]},"hash":"ada5f6b36fcc510d8297d69e0222f72ec11abf36"}
