{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck"],"marked":[],"modules":{"imports":[{"source":"meteor/underscore","imported":["_"],"specifiers":[{"kind":"named","imported":"_","local":"_"}]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"angular-ecmascript/module-helpers","imported":["Filter"],"specifiers":[{"kind":"named","imported":"Filter","local":"Filter"}]}],"exports":{"exported":["ChatPictureFilter"],"specifiers":[{"kind":"local","local":"ChatPictureFilter","exported":"default"}]}}},"options":{"filename":"/client/scripts/filters/chat-picture.filter.js","filenameRelative":"/client/scripts/filters/chat-picture.filter.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/scripts/filters/chat-picture.filter.js.map","sourceFileName":"/client/scripts/filters/chat-picture.filter.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"chat-picture.filter"},"ignored":false,"code":"var _classCallCheck;module.import('babel-runtime/helpers/classCallCheck',{\"default\":function(v){_classCallCheck=v}});var _possibleConstructorReturn;module.import('babel-runtime/helpers/possibleConstructorReturn',{\"default\":function(v){_possibleConstructorReturn=v}});var _inherits;module.import('babel-runtime/helpers/inherits',{\"default\":function(v){_inherits=v}});var _;module.import('meteor/underscore',{\"_\":function(v){_=v}});var Meteor;module.import('meteor/meteor',{\"Meteor\":function(v){Meteor=v}});var Filter;module.import('angular-ecmascript/module-helpers',{\"Filter\":function(v){Filter=v}});\n\n\n\n\n\n\nvar ChatPictureFilter = function (_Filter) {\n  _inherits(ChatPictureFilter, _Filter);\n\n  function ChatPictureFilter() {\n    _classCallCheck(this, ChatPictureFilter);\n\n    return _possibleConstructorReturn(this, _Filter.apply(this, arguments));\n  }\n\n  ChatPictureFilter.prototype.filter = function () {\n    function filter(chat) {\n      if (!chat) return;\n\n      var otherId = _.without(chat.userIds, Meteor.userId())[0];\n      var otherUser = Meteor.users.findOne(otherId);\n      var hasPicture = otherUser && otherUser.profile && otherUser.profile.picture;\n\n      return hasPicture ? otherUser.profile.picture : chat.picture || '/user-default.svg';\n    }\n\n    return filter;\n  }();\n\n  return ChatPictureFilter;\n}(Filter);\n\nmodule.export(\"default\",exports.default=(ChatPictureFilter));\n\n\nChatPictureFilter.$name = 'chatPicture';","ast":null,"map":{"version":3,"sources":["/client/scripts/filters/chat-picture.filter.js"],"names":["_","Meteor","Filter","ChatPictureFilter","filter","chat","otherId","without","userIds","userId","otherUser","users","findOne","hasPicture","profile","picture","$name"],"mappings":";;;AAAA,SAASA,CAAT,QAAkB,mBAAlB;AACA,SAASC,MAAT,QAAuB,eAAvB;AACA,SAASC,MAAT,QAAuB,mCAAvB;;IAEqBC,iB;;;;;;;;;8BACnBC,M;oBAAOC,I,EAAM;AACX,UAAI,CAACA,IAAL,EAAW;;AAEX,UAAIC,UAAUN,EAAEO,OAAF,CAAUF,KAAKG,OAAf,EAAwBP,OAAOQ,MAAP,EAAxB,EAAyC,CAAzC,CAAd;AACA,UAAIC,YAAYT,OAAOU,KAAP,CAAaC,OAAb,CAAqBN,OAArB,CAAhB;AACA,UAAIO,aAAaH,aAAaA,UAAUI,OAAvB,IAAkCJ,UAAUI,OAAV,CAAkBC,OAArE;;AAEA,aAAOF,aAAaH,UAAUI,OAAV,CAAkBC,OAA/B,GAAyCV,KAAKU,OAAL,IAAgB,mBAAhE;AACD;;;;;;EAT4Cb,M;;eAA1BC,iB;;;AAYrBA,kBAAkBa,KAAlB,GAA0B,aAA1B","file":"/client/scripts/filters/chat-picture.filter.js.map","sourcesContent":["import { _ } from 'meteor/underscore';\nimport { Meteor } from 'meteor/meteor';\nimport { Filter } from 'angular-ecmascript/module-helpers';\n\nexport default class ChatPictureFilter extends Filter {\n  filter(chat) {\n    if (!chat) return;\n\n    let otherId = _.without(chat.userIds, Meteor.userId())[0];\n    let otherUser = Meteor.users.findOne(otherId);\n    let hasPicture = otherUser && otherUser.profile && otherUser.profile.picture;\n\n    return hasPicture ? otherUser.profile.picture : chat.picture || '/user-default.svg';\n  };\n}\n\nChatPictureFilter.$name = 'chatPicture';"]},"hash":"23efe93406990ea346060c311212f484958ce809"}
