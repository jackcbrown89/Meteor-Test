{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck"],"marked":[],"modules":{"imports":[{"source":"meteor/underscore","imported":["_"],"specifiers":[{"kind":"named","imported":"_","local":"_"}]},{"source":"meteor/accounts-base","imported":["Accounts"],"specifiers":[{"kind":"named","imported":"Accounts","local":"Accounts"}]},{"source":"angular-ecmascript/module-helpers","imported":["Controller"],"specifiers":[{"kind":"named","imported":"Controller","local":"Controller"}]}],"exports":{"exported":["LoginCtrl"],"specifiers":[{"kind":"local","local":"LoginCtrl","exported":"default"}]}}},"options":{"filename":"/client/scripts/controllers/login.controller.js","filenameRelative":"/client/scripts/controllers/login.controller.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/scripts/controllers/login.controller.js.map","sourceFileName":"/client/scripts/controllers/login.controller.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"login.controller"},"ignored":false,"code":"var _classCallCheck;module.import('babel-runtime/helpers/classCallCheck',{\"default\":function(v){_classCallCheck=v}});var _possibleConstructorReturn;module.import('babel-runtime/helpers/possibleConstructorReturn',{\"default\":function(v){_possibleConstructorReturn=v}});var _inherits;module.import('babel-runtime/helpers/inherits',{\"default\":function(v){_inherits=v}});var _;module.import('meteor/underscore',{\"_\":function(v){_=v}});var Accounts;module.import('meteor/accounts-base',{\"Accounts\":function(v){Accounts=v}});var Controller;module.import('angular-ecmascript/module-helpers',{\"Controller\":function(v){Controller=v}});\n\n\n\n\n\n\nvar LoginCtrl = function (_Controller) {\n  _inherits(LoginCtrl, _Controller);\n\n  function LoginCtrl() {\n    _classCallCheck(this, LoginCtrl);\n\n    return _possibleConstructorReturn(this, _Controller.apply(this, arguments));\n  }\n\n  LoginCtrl.prototype.login = function () {\n    function login() {\n      var _this2 = this;\n\n      if (_.isEmpty(this.phone)) return;\n\n      var confirmPopup = this.$ionicPopup.confirm({\n        title: 'Number confirmation',\n        template: '<div>' + this.phone + '</div><div>Is your phone number above correct?</div>',\n        cssClass: 'text-center',\n        okText: 'Yes',\n        okType: 'button-positive button-clear',\n        cancelText: 'edit',\n        cancelType: 'button-dark button-clear'\n      });\n\n      confirmPopup.then(function (res) {\n        if (!res) return;\n\n        _this2.$ionicLoading.show({\n          template: 'Sending verification code...'\n        });\n\n        Accounts.requestPhoneVerification(_this2.phone, function (err) {\n          _this2.$ionicLoading.hide();\n          if (err) return _this2.handleError(err);\n          _this2.$state.go('confirmation', { phone: _this2.phone });\n        });\n      });\n    }\n\n    return login;\n  }();\n\n  LoginCtrl.prototype.handleError = function () {\n    function handleError(err) {\n      this.$log.error('Login error ', err);\n\n      this.$ionicPopup.alert({\n        title: err.reason || 'Login failed',\n        template: 'Please try again',\n        okType: 'button-positive button-clear'\n      });\n    }\n\n    return handleError;\n  }();\n\n  return LoginCtrl;\n}(Controller);\n\nmodule.export(\"default\",exports.default=(LoginCtrl));\n\n\nLoginCtrl.$name = 'LoginCtrl';\nLoginCtrl.$inject = ['$state', '$ionicLoading', '$ionicPopup', '$log'];","ast":null,"map":{"version":3,"sources":["/client/scripts/controllers/login.controller.js"],"names":["_","Accounts","Controller","LoginCtrl","login","isEmpty","phone","confirmPopup","$ionicPopup","confirm","title","template","cssClass","okText","okType","cancelText","cancelType","then","res","$ionicLoading","show","requestPhoneVerification","err","hide","handleError","$state","go","$log","error","alert","reason","$name","$inject"],"mappings":";;;AAAA,SAASA,CAAT,QAAkB,mBAAlB;AACA,SAASC,QAAT,QAAyB,sBAAzB;AACA,SAASC,UAAT,QAA2B,mCAA3B;;IAEqBC,S;;;;;;;;;sBACnBC,K;qBAAQ;AAAA;;AACN,UAAIJ,EAAEK,OAAF,CAAU,KAAKC,KAAf,CAAJ,EAA2B;;AAE3B,UAAMC,eAAe,KAAKC,WAAL,CAAiBC,OAAjB,CAAyB;AAC5CC,eAAO,qBADqC;AAE5CC,kBAAU,UAAU,KAAKL,KAAf,GAAuB,sDAFW;AAG5CM,kBAAU,aAHkC;AAI5CC,gBAAQ,KAJoC;AAK5CC,gBAAQ,8BALoC;AAM5CC,oBAAY,MANgC;AAO5CC,oBAAY;AAPgC,OAAzB,CAArB;;AAUAT,mBAAaU,IAAb,CAAkB,UAACC,GAAD,EAAS;AACzB,YAAI,CAACA,GAAL,EAAU;;AAEV,eAAKC,aAAL,CAAmBC,IAAnB,CAAwB;AACtBT,oBAAU;AADY,SAAxB;;AAIAV,iBAASoB,wBAAT,CAAkC,OAAKf,KAAvC,EAA8C,UAACgB,GAAD,EAAS;AACrD,iBAAKH,aAAL,CAAmBI,IAAnB;AACA,cAAID,GAAJ,EAAS,OAAO,OAAKE,WAAL,CAAiBF,GAAjB,CAAP;AACT,iBAAKG,MAAL,CAAYC,EAAZ,CAAe,cAAf,EAA+B,EAAEpB,OAAO,OAAKA,KAAd,EAA/B;AACD,SAJD;AAKD,OAZD;AAaD;;;;;sBAEDkB,W;yBAAYF,G,EAAK;AACf,WAAKK,IAAL,CAAUC,KAAV,CAAgB,cAAhB,EAAgCN,GAAhC;;AAEA,WAAKd,WAAL,CAAiBqB,KAAjB,CAAuB;AACrBnB,eAAOY,IAAIQ,MAAJ,IAAc,cADA;AAErBnB,kBAAU,kBAFW;AAGrBG,gBAAQ;AAHa,OAAvB;AAKD;;;;;;EArCoCZ,U;;eAAlBC,S;;;AAwCrBA,UAAU4B,KAAV,GAAkB,WAAlB;AACA5B,UAAU6B,OAAV,GAAoB,CAAC,QAAD,EAAW,eAAX,EAA4B,aAA5B,EAA2C,MAA3C,CAApB","file":"/client/scripts/controllers/login.controller.js.map","sourcesContent":["import { _ } from 'meteor/underscore';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Controller } from 'angular-ecmascript/module-helpers';\n\nexport default class LoginCtrl extends Controller {\n  login() {\n    if (_.isEmpty(this.phone)) return;\n\n    const confirmPopup = this.$ionicPopup.confirm({\n      title: 'Number confirmation',\n      template: '<div>' + this.phone + '</div><div>Is your phone number above correct?</div>',\n      cssClass: 'text-center',\n      okText: 'Yes',\n      okType: 'button-positive button-clear',\n      cancelText: 'edit',\n      cancelType: 'button-dark button-clear'\n    });\n\n    confirmPopup.then((res) => {\n      if (!res) return;\n\n      this.$ionicLoading.show({\n        template: 'Sending verification code...'\n      });\n\n      Accounts.requestPhoneVerification(this.phone, (err) => {\n        this.$ionicLoading.hide();\n        if (err) return this.handleError(err);\n        this.$state.go('confirmation', { phone: this.phone });\n      });\n    });\n  }\n\n  handleError(err) {\n    this.$log.error('Login error ', err);\n\n    this.$ionicPopup.alert({\n      title: err.reason || 'Login failed',\n      template: 'Please try again',\n      okType: 'button-positive button-clear'\n    });\n  }\n}\n\nLoginCtrl.$name = 'LoginCtrl';\nLoginCtrl.$inject = ['$state', '$ionicLoading', '$ionicPopup', '$log'];"]},"hash":"5ce8e35ebc215030374a84f320aa5f50e4a9982c"}
